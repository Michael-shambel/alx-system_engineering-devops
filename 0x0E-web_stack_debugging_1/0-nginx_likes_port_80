#!/usr/bin/env bash
# Install Nginx if not already installed
apt-get update
apt-get install -y nginx

# Check if Nginx is already configured to listen on port 80
if grep -q "listen 80;" /etc/nginx/sites-available/default; then
    echo "Nginx is already configured to listen on port 80"
else
    # Add configuration to listen on port 80
    sed -i 's/listen 80;/listen 80 default_server;/g' /etc/nginx/sites-available/default
    
    # Restart Nginx
    service nginx restart
    
    # Check if Nginx is now listening on port 80
    if netstat -tuln | grep -q ':80 '; then
        echo "Nginx is now listening on port 80"
    else
        echo "Nginx is still not listening on port 80"
    fi
fi

